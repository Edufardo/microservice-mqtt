import { OrdersService } from './orders.service';
import { OrdersController } from './orders.controller';
import { DynamicModule, Module } from '@nestjs/common';
import { PassportModule } from '@nestjs/passport';
import { StationsModule } from '../stations/stations.module';
import { OrderConfig } from './order-config';

@Module({
    imports: [
        PassportModule.register({ defaultStrategy: 'jwt' }),
        StationsModule
    ],
    controllers: [
        OrdersController
    ],
    providers: [
        OrdersService
    ],
    exports: [
        OrdersService
    ]
})
export class OrdersModule {
    static register(options: OrderConfig): DynamicModule {
        return {
            module: OrdersModule,
            providers: [
            {
                provide: 'CONFIG_OPTIONS',
                useValue: options,
            },
            OrdersService,
            ],
            exports: [OrdersService]
        };
    }
}

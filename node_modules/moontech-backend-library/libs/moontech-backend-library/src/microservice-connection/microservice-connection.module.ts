import { MicroserviceConnectionService } from './microservice-connection.service';
import { DynamicModule, Module } from '@nestjs/common';
import { MicroserviceConnectionConfig } from './microservice-connection-config';

@Module({
    imports: [],
    controllers: [ ],
    providers: [
        MicroserviceConnectionService
    ],
    exports: [
        MicroserviceConnectionService
    ]
})
export class MicroserviceConnectionModule {
    static register(options: MicroserviceConnectionConfig): DynamicModule {
        return {
            module: MicroserviceConnectionModule,
            providers: [
            {
                provide: 'CONFIG_OPTIONS',
                useValue: options,
            },
            MicroserviceConnectionService,
            ],
            exports: [MicroserviceConnectionService],
            global: true
        };
    }
}
